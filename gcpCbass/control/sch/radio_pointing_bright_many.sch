(Time lststart, Time lststop)
# Cycle through list of radio sources taking a cross-scan on each

# sources must be really bright

import ~cbass/gcpCbass/control/sch/schedlib.sch

# Define source list, with an lst for each one.  This list is
# created by rad_set.m in order to maximize sky coverage.

group Source {
  Source name,    # source name
  Time  lst,      # lst to observe source
  Double flux     # source flux (in Jy)
}

listof Source sources = {
{J0205+621, 0.00, 0.50},
{    casa, 0.05, 4.00},
{J2039+423, 0.10, 0.70},
{J2313+615, 0.15, 0.50},
{    casa, 0.20, 4.00},
{    CygA, 0.25, 5.00},
{J2313+615, 0.30, 0.50},
{J2313+615, 0.35, 0.50},
{    casa, 0.40, 4.00},
{J2313+615, 0.45, 0.50},
{    CygA, 0.50, 5.00},
{    casa, 0.55, 4.00},
{J2313+615, 0.60, 0.50},
{J2313+615, 0.65, 0.50},
{J0205+621, 0.70, 0.50},
{J0225+621, 0.75, 0.80},
{J0205+621, 0.80, 0.50},
{J0226+623, 0.85, 0.80},
{    CygA, 0.90, 5.00},
{J0534+2201, 0.95, 3.00},
{J2313+615, 1.00, 0.50},
{    CygA, 1.05, 5.00},
{    CygA, 1.10, 5.00},
{J2313+615, 1.15, 0.50},
{J0534+219, 1.20, 3.00},
{J0225+621, 1.25, 0.80},
{J2313+615, 1.30, 0.50},
{J0226+623, 1.35, 0.80},
{J0534+2200, 1.40, 3.00},
{J0225+621, 1.45, 0.80},
{J0534+2200, 1.50, 3.00},
{J2039+423, 1.55, 0.70},
{J2039+423, 1.60, 0.70},
{    CygA, 1.65, 5.00},
{J2039+423, 1.70, 0.70},
{J0226+623, 1.75, 0.80},
{    DR21, 1.80, 1.00},
{J2313+615, 1.85, 0.50},
{    DR21, 1.90, 1.00},
{J0534+219, 1.95, 3.00},
{J05345+2200, 2.00, 3.00},
{J0205+621, 2.05, 0.50},
{J0205+621, 2.10, 0.50},
{    DR21, 2.15, 1.00},
{J2313+615, 2.20, 0.50},
{J0534+2204, 2.25, 3.00},
{J2039+423, 2.30, 0.70},
{J2313+615, 2.35, 0.50},
{    DR21, 2.40, 1.00},
{J0225+621, 2.45, 0.80},
{J0534+219, 2.50, 3.00},
{J0205+621, 2.55, 0.50},
{J0534+2201, 2.60, 3.00},
{J2313+615, 2.65, 0.50},
{J2313+615, 2.70, 0.50},
{J0534+2201, 2.75, 3.00},
{J05345+2200, 2.80, 3.00},
{J0534+219, 2.85, 3.00},
{J2313+615, 2.90, 0.50},
{J0534+2204, 2.95, 3.00},
{    casa, 3.00, 4.00},
{J0205+621, 3.05, 0.50},
{J0225+621, 3.10, 0.80},
{J2313+615, 3.15, 0.50},
{    casa, 3.20, 4.00},
{J0534+2203, 3.25, 3.00},
{J0534+2201, 3.30, 3.00},
{MG20535+220, 3.35, 3.00},
{J0225+621, 3.40, 0.80},
{J0534+2204, 3.45, 3.00},
{J0225+621, 3.50, 0.80},
{J0534+219, 3.55, 3.00},
{J0534+2203, 3.60, 3.00},
{J0205+621, 3.65, 0.50},
{    casa, 3.70, 4.00},
{J0225+621, 3.75, 0.80},
{J0534+219, 3.80, 3.00},
{J2313+615, 3.85, 0.50},
{    casa, 3.90, 4.00},
{J2313+615, 3.95, 0.50},
{J0534+2201, 4.00, 3.00},
{MG20535+220, 4.05, 3.00},
{MG20535+220, 4.10, 3.00},
{MG20535+220, 4.15, 3.00},
{MG20535+220, 4.20, 3.00},
{J0225+621, 4.25, 0.80},
{J2313+615, 4.30, 0.50},
{MG20535+220, 4.35, 3.00},
{J0226+623, 4.40, 0.80},
{MG20535+220, 4.45, 3.00},
{MG20535+220, 4.50, 3.00},
{    casa, 4.55, 4.00},
{    casa, 4.60, 4.00},
{    casa, 4.65, 4.00},
{J0205+621, 4.70, 0.50},
{J0534+2201, 4.75, 3.00},
{J2313+615, 4.80, 0.50},
{J0226+623, 4.85, 0.80},
{J2313+615, 4.90, 0.50},
{J0534+2204, 4.95, 3.00},
{J0226+623, 5.00, 0.80},
{J0205+621, 5.05, 0.50},
{J0225+621, 5.10, 0.80},
{J0205+621, 5.15, 0.50},
{J0226+623, 5.20, 0.80},
{J0534+2201, 5.25, 3.00},
{J0205+621, 5.30, 0.50},
{J2313+615, 5.35, 0.50},
{J0226+623, 5.40, 0.80},
{MG20535+220, 5.45, 3.00},
{J0534+219, 5.50, 3.00},
{MG20535+220, 5.55, 3.00},
{J2313+615, 5.60, 0.50},
{J0534+2200, 5.65, 3.00},
{J0205+621, 5.70, 0.50},
{J0534+2200, 5.75, 3.00},
{J0205+621, 5.80, 0.50},
{J2313+615, 5.85, 0.50},
{J0205+621, 5.90, 0.50},
{J2313+615, 5.95, 0.50},
{J0534+219, 6.00, 3.00},
{J0205+621, 6.05, 0.50},
{J0226+623, 6.10, 0.80},
{J2313+615, 6.15, 0.50},
{    casa, 6.20, 4.00},
{J0225+621, 6.25, 0.80},
{MG20535+220, 6.30, 3.00},
{J0534+219, 6.35, 3.00},
{J0225+621, 6.40, 0.80},
{J0205+621, 6.45, 0.50},
{J0226+623, 6.50, 0.80},
{J0225+621, 6.55, 0.80},
{J0534+219, 6.60, 3.00},
{J0205+621, 6.65, 0.50},
{J0534+2201, 6.70, 3.00},
{J0205+621, 6.75, 0.50},
{J0534+2204, 6.80, 3.00},
{MG20535+220, 6.85, 3.00},
{J0205+621, 6.90, 0.50},
{J0534+2201, 6.95, 3.00},
{J0534+2201, 7.00, 3.00},
{MG20535+220, 7.05, 3.00},
{MG20535+220, 7.10, 3.00},
{J0225+621, 7.15, 0.80},
{J0225+621, 7.20, 0.80},
{J0205+621, 7.25, 0.50},
{J0534+2201, 7.30, 3.00},
{J0534+2201, 7.35, 3.00},
{J0205+621, 7.40, 0.50},
{J0205+621, 7.45, 0.50},
{J0225+621, 7.50, 0.80},
{J05345+2200, 7.55, 3.00},
{MG20535+220, 7.60, 3.00},
{J0226+623, 7.65, 0.80},
{J0205+621, 7.70, 0.50},
{J0226+623, 7.75, 0.80},
{J0205+621, 7.80, 0.50},
{J0226+623, 7.85, 0.80},
{J0534+219, 7.90, 3.00},
{J0534+219, 7.95, 3.00},
{MG20535+220, 8.00, 3.00},
{J0205+621, 8.05, 0.50},
{J1230+123, 8.10, 0.50},
{J0205+621, 8.15, 0.50},
{J0534+2200, 8.20, 3.00},
{MG20535+220, 8.25, 3.00},
{J0205+621, 8.30, 0.50},
{J0534+2201, 8.35, 3.00},
{J0205+621, 8.40, 0.50},
{J0534+219, 8.45, 3.00},
{J0205+621, 8.50, 0.50},
{J0225+621, 8.55, 0.80},
{J1230+123, 8.60, 0.50},
{J0534+2201, 8.65, 3.00},
{J0226+623, 8.70, 0.80},
{J1230+123, 8.75, 0.50},
{J1230+123, 8.80, 0.50},
{J05345+2200, 8.85, 3.00},
{MG20535+220, 8.90, 3.00},
{MG20535+220, 8.95, 3.00},
{J0534+2204, 9.00, 3.00},
{J0205+621, 9.05, 0.50},
{J0534+2201, 9.10, 3.00},
{J0226+623, 9.15, 0.80},
{J0534+2201, 9.20, 3.00},
{J0205+621, 9.25, 0.50},
{J0225+621, 9.30, 0.80},
{J1230+123, 9.35, 0.50},
{J0205+621, 9.40, 0.50},
{J0225+621, 9.45, 0.80},
{J0534+219, 9.50, 3.00},
{J1230+123, 9.55, 0.50},
{MG20535+220, 9.60, 3.00},
{J1230+123, 9.65, 0.50},
{J0534+2200, 9.70, 3.00},
{J0534+2204, 9.75, 3.00},
{J1230+123, 9.80, 0.50},
{J1230+123, 9.85, 0.50},
{J0534+2201, 9.90, 3.00},
{J0534+2201, 9.95, 3.00},
{J0534+2201, 10.00, 3.00},
{MG20535+220, 10.05, 3.00},
{J1230+123, 10.10, 0.50},
{J0534+2201, 10.15, 3.00},
{J1230+123, 10.20, 0.50},
{J0534+2203, 10.25, 3.00},
{MG20535+220, 10.30, 3.00},
{J0534+219, 10.35, 3.00},
{J1230+123, 10.40, 0.50},
{J1230+123, 10.45, 0.50},
{J1230+123, 10.50, 0.50},
{J0534+2200, 10.55, 3.00},
{J1230+123, 10.60, 0.50},
{J1230+123, 10.65, 0.50},
{J1230+123, 10.70, 0.50},
{J1230+123, 10.75, 0.50},
{J1230+123, 10.80, 0.50},
{J1230+123, 10.85, 0.50},
{J1230+123, 10.90, 0.50},
{J1230+123, 10.95, 0.50},
{J1230+123, 11.00, 0.50},
{J1230+123, 11.05, 0.50},
{J1230+123, 11.10, 0.50},
{J1230+123, 11.15, 0.50},
{J1230+123, 11.20, 0.50},
{J1230+123, 11.25, 0.50},
{J1230+123, 11.30, 0.50},
{J1230+123, 11.35, 0.50},
{J1230+123, 11.40, 0.50},
{J1230+123, 11.45, 0.50},
{J1230+123, 11.50, 0.50},
{J1230+123, 11.55, 0.50},
{J1230+123, 11.60, 0.50},
{J1230+123, 11.65, 0.50},
{J1230+123, 11.70, 0.50},
{J1230+123, 11.75, 0.50},
{J1230+123, 11.80, 0.50},
{J1230+123, 11.85, 0.50},
{J1230+123, 11.90, 0.50},
{J1230+123, 11.95, 0.50},
{J1230+123, 12.00, 0.50},
{J1230+123, 12.05, 0.50},
{J1230+123, 12.10, 0.50},
{J1230+123, 12.15, 0.50},
{J1230+123, 12.20, 0.50},
{J1230+123, 12.25, 0.50},
{J1230+123, 12.30, 0.50},
{J1230+123, 12.35, 0.50},
{J1230+123, 12.40, 0.50},
{J1230+123, 12.45, 0.50},
{J1230+123, 12.50, 0.50},
{J1230+123, 12.55, 0.50},
{J1230+123, 12.60, 0.50},
{J1230+123, 12.65, 0.50},
{J1230+123, 12.70, 0.50},
{J1230+123, 12.75, 0.50},
{J1230+123, 12.80, 0.50},
{J1230+123, 12.85, 0.50},
{J1230+123, 12.90, 0.50},
{J1230+123, 12.95, 0.50},
{J1230+123, 13.00, 0.50},
{J1230+123, 13.05, 0.50},
{J1230+123, 13.10, 0.50},
{J1230+123, 13.15, 0.50},
{J1230+123, 13.20, 0.50},
{J1230+123, 13.25, 0.50},
{J1230+123, 13.30, 0.50},
{J1230+123, 13.35, 0.50},
{J1230+123, 13.40, 0.50},
{J1230+123, 13.45, 0.50},
{J1230+123, 13.50, 0.50},
{J1230+123, 13.55, 0.50},
{J1230+123, 13.60, 0.50},
{J1230+123, 13.65, 0.50},
{J1230+123, 13.70, 0.50},
{J1230+123, 13.75, 0.50},
{J1230+123, 13.80, 0.50},
{J1230+123, 13.85, 0.50},
{J1230+123, 13.90, 0.50},
{J1230+123, 13.95, 0.50},
{J1230+123, 14.00, 0.50},
{J1230+123, 14.05, 0.50},
{J1230+123, 14.10, 0.50},
{J1230+123, 14.15, 0.50},
{J1230+123, 14.20, 0.50},
{J1230+123, 14.25, 0.50},
{J1230+123, 14.30, 0.50},
{J1230+123, 14.35, 0.50},
{J1230+123, 14.40, 0.50},
{    CygA, 14.45, 5.00},
{J1230+123, 14.50, 0.50},
{    CygA, 14.55, 5.00},
{    CygA, 14.60, 5.00},
{J1230+123, 14.65, 0.50},
{    CygA, 14.70, 5.00},
{    CygA, 14.75, 5.00},
{    CygA, 14.80, 5.00},
{J1230+123, 14.85, 0.50},
{J1904+055, 14.90, 1.00},
{J1904+055, 14.95, 1.00},
{J1853+012, 15.00, 0.50},
{J1230+123, 15.05, 0.50},
{J1853+012, 15.10, 0.50},
{J2039+423, 15.15, 0.70},
{J1853+012, 15.20, 0.50},
{J1849-009, 15.25, 0.50},
{J1910+091, 15.30, 2.00},
{J1907+071, 15.35, 1.00},
{J1910+091, 15.40, 2.00},
{J1907+071, 15.45, 1.00},
{J2039+423, 15.50, 0.70},
{IR19207+1410, 15.55, 1.50},
{IR19207+1410, 15.60, 1.50},
{J1817-1144, 15.65, 0.60},
{IR19207+1410, 15.70, 1.50},
{J1833-1034, 15.75, 0.50},
{IR19207+1410, 15.80, 1.50},
{J1833-1034, 15.85, 0.50},
{PKS1921+14, 15.90, 1.00},
{    DR21, 15.95, 1.00},
{J1911+091, 16.00, 1.00},
{J1853+012, 16.05, 0.50},
{PKS1921+14, 16.10, 1.00},
{J1833-1034, 16.15, 0.50},
{IR19207+1410, 16.20, 1.50},
{J1849-009, 16.25, 0.50},
{IR19207+1410, 16.30, 1.50},
{J2313+615, 16.35, 0.50},
{J1817-1144, 16.40, 0.60},
{J1833-1034, 16.45, 0.50},
{J1904+055, 16.50, 1.00},
{J1849-009, 16.55, 0.50},
{    CygA, 16.60, 5.00},
{J1907+071, 16.65, 1.00},
{J1230+123, 16.70, 0.50},
{J1907+071, 16.75, 1.00},
{J2039+423, 16.80, 0.70},
{    CygA, 16.85, 5.00},
{    DR21, 16.90, 1.00},
{    casa, 16.95, 4.00},
{J1904+055, 17.00, 1.00},
{PKS1921+14, 17.05, 1.00},
{J1853+012, 17.10, 0.50},
{J2039+423, 17.15, 0.70},
{J1907+071, 17.20, 1.00},
{IR19207+1410, 17.25, 1.50},
{    casa, 17.30, 4.00},
{    DR21, 17.35, 1.00},
{    CygA, 17.40, 5.00},
{    DR21, 17.45, 1.00},
{J1907+071, 17.50, 1.00},
{J2313+615, 17.55, 0.50},
{J1814-179, 17.60, 1.00},
{J2039+423, 17.65, 0.70},
{J1810-1955, 17.70, 0.70},
{    DR21, 17.75, 1.00},
{PKS1921+14, 17.80, 1.00},
{IR19207+1410, 17.85, 1.50},
{IR19207+1410, 17.90, 1.50},
{J1849-009, 17.95, 0.50},
{J1833-1034, 18.00, 0.50},
{J1810-1955, 18.05, 0.70},
{    casa, 18.10, 4.00},
{J1817-1144, 18.15, 0.60},
{    CygA, 18.20, 5.00},
{J1904+055, 18.25, 1.00},
{    DR21, 18.30, 1.00},
{J1904+055, 18.35, 1.00},
{J1904+055, 18.40, 1.00},
{J2313+615, 18.45, 0.50},
{J1911+091, 18.50, 1.00},
{J1904+055, 18.55, 1.00},
{J1853+012, 18.60, 0.50},
{IR19207+1410, 18.65, 1.50},
{PKS1921+14, 18.70, 1.00},
{J1853+012, 18.75, 0.50},
{J1907+071, 18.80, 1.00},
{J1810-1955, 18.85, 0.70},
{PKS1921+14, 18.90, 1.00},
{J1853+012, 18.95, 0.50},
{    casa, 19.00, 4.00},
{J2313+615, 19.05, 0.50},
{    DR21, 19.10, 1.00},
{J1810-1955, 19.15, 0.70},
{    casa, 19.20, 4.00},
{J1853+012, 19.25, 0.50},
{J1853+012, 19.30, 0.50},
{J0225+621, 19.35, 0.80},
{J1849-009, 19.40, 0.50},
{J1810-1955, 19.45, 0.70},
{J1911+091, 19.50, 1.00},
{J1833-1034, 19.55, 0.50},
{J1904+055, 19.60, 1.00},
{J2039+423, 19.65, 0.70},
{J1814-179, 19.70, 1.00},
{J1849-009, 19.75, 0.50},
{J1904+055, 19.80, 1.00},
{J1810-1955, 19.85, 0.70},
{J1904+055, 19.90, 1.00},
{PKS1921+14, 19.95, 1.00},
{IR19207+1410, 20.00, 1.50},
{J2039+423, 20.05, 0.70},
{J1911+091, 20.10, 1.00},
{J1849-009, 20.15, 0.50},
{J1810-1955, 20.20, 0.70},
{J1911+091, 20.25, 1.00},
{    casa, 20.30, 4.00},
{J1814-179, 20.35, 1.00},
{J0205+621, 20.40, 0.50},
{J1910+091, 20.45, 2.00},
{J1904+055, 20.50, 1.00},
{J0205+621, 20.55, 0.50},
{PKS1921+14, 20.60, 1.00},
{J2039+423, 20.65, 0.70},
{J2313+615, 20.70, 0.50},
{J1817-1144, 20.75, 0.60},
{    casa, 20.80, 4.00},
{J0226+623, 20.85, 0.80},
{J1853+012, 20.90, 0.50},
{J0225+621, 20.95, 0.80},
{J1853+012, 21.00, 0.50},
{J0205+621, 21.05, 0.50},
{J0226+623, 21.10, 0.80},
{    DR21, 21.15, 1.00},
{    DR21, 21.20, 1.00},
{J1910+091, 21.25, 2.00},
{PKS1921+14, 21.30, 1.00},
{J0225+621, 21.35, 0.80},
{J2313+615, 21.40, 0.50},
{PKS1921+14, 21.45, 1.00},
{J1849-009, 21.50, 0.50},
{    DR21, 21.55, 1.00},
{J1853+012, 21.60, 0.50},
{J0226+623, 21.65, 0.80},
{J1853+012, 21.70, 0.50},
{PKS1921+14, 21.75, 1.00},
{J1904+055, 21.80, 1.00},
{    DR21, 21.85, 1.00},
{J1907+071, 21.90, 1.00},
{J1849-009, 21.95, 0.50},
{J1907+071, 22.00, 1.00},
{    DR21, 22.05, 1.00},
{J1904+055, 22.10, 1.00},
{J2313+615, 22.15, 0.50},
{J0226+623, 22.20, 0.80},
{J1904+055, 22.25, 1.00},
{PKS1921+14, 22.30, 1.00},
{J2039+423, 22.35, 0.70},
{J2039+423, 22.40, 0.70},
{J1910+091, 22.45, 2.00},
{J0226+623, 22.50, 0.80},
{    casa, 22.55, 4.00},
{    CygA, 22.60, 5.00},
{IR19207+1410, 22.65, 1.50},
{J1904+055, 22.70, 1.00},
{J1853+012, 22.75, 0.50},
{J1907+071, 22.80, 1.00},
{J0205+621, 22.85, 0.50},
{J1904+055, 22.90, 1.00},
{    DR21, 22.95, 1.00},
{IR19207+1410, 23.00, 1.50},
{J0225+621, 23.05, 0.80},
{J2313+615, 23.10, 0.50},
{J0225+621, 23.15, 0.80},
{J1911+091, 23.20, 1.00},
{J0226+623, 23.25, 0.80},
{PKS1921+14, 23.30, 1.00},
{J0205+621, 23.35, 0.50},
{PKS1921+14, 23.40, 1.00},
{J0205+621, 23.45, 0.50},
{J1910+091, 23.50, 2.00},
{    casa, 23.55, 4.00},
{J2039+423, 23.60, 0.70},
{J2039+423, 23.65, 0.70},
{J2313+615, 23.70, 0.50},
{J0205+621, 23.75, 0.50},
{    casa, 23.80, 4.00},
{    DR21, 23.85, 1.00},
{J0205+621, 23.90, 0.50},
{IR19207+1410, 23.95, 1.50},
{    DR21, 23.99, 1.00}
}


# start observation
init_obs("Beginning schedule: radio_pointing.sch")

# do a sky dip
#do_sky_dip

# Set archiving to the correct mode
mark remove, all

#-----------------------------------------------------------------------
# Main loop -- track the next source,do a raster, move on
#-----------------------------------------------------------------------

log "Waiting for lststart..."
until $after($lststart,lst) 

  # Go through list
  foreach(Source source) $sources {

    # Break if past lststop
    if $time(lst)>$lststop {
       log "lststop reached"
       break
    }   

    # Skip sources whose lst has passed
    if $time(lst)>$source.lst  {
       log "too late for source",$source.name
    }

    # Do a cross on next available source
    if $time(lst)<$source.lst {


      # Track Source
      track $source.name
      until $acquired(source)
      until $after($source.lst,lst) # make sure we're not early
      log "Doing scan on ",$source.name

      # Do scan
      mark add, f7
      log "starting scan"
      scan point_cross_10daz_10del_1ds
      until $acquired(scan)
      mark remove, f7


      zeroScanOffsets   	# zero offsets
    }
  }

# do a sky dip
#do_sky_dip

terminate("Finished schedule: radio_pointing.sch")

