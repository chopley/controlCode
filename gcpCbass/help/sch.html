<HEAD><TITLE>The SPT Scheduling Language.</TITLE></HEAD>
<BODY bgcolor=#add8e6>
<H1>The SPT Scheduling Language.</H1>

<a href="control.html">Click here to reach
the control system home page.</a>
<P>
If this is your first encounter with the language, please read:
<P>
<a href="intro.html">A Tutorial Introduction to the Language</a>
<P>
The rest of this page contains links to reference information.

<HR>
<H2>Miscellaneous information</H2>
<a href="specific/registers.html">The list of SPT registers</a>
<BR>
<a href="viewer/index.html">The sptViewer program.</a>

<HR>
<H2>The SPT Command Set</H2>

<dl>
<dd>Configuration
<br>
  <dl>
    <dd><a href="#cntl_conf_list">Control program configuration commands</a>
    <dd><a href="#pointing_model_list">Pointing model commands</a>
    <dd><a href="#param_query_list">Parameter query functions</a>
  </dl>
<br>
<dd>Scheduling
<br>
  <dl>
    <dd><a href="#sch_cntl_list">Scheduling control commands</a>
    <dd><a href="#sch_inq_list">Scheduling inquiry functions</a>
  </dl>
<br>
<dd>Scripting
  <dl>
    <dd><a href="#gen_script_list">General scripting commands</a>
    <dd><a href="#misc_cmd_list">Miscellaneous commands</a>
    <dd><a href="#misc_inq_list">Miscellaneous inquiry functions</a>
    <dd><a href="#misc_inq_cmd_list">Miscellaneous inquiry commands</a>
    <dd><a href="#env_var">Environment variable query functions</a>
    <dd><a href="#spt_dt">Data types used by commands</a>
  </dl>
<br>
<dd>Telescope Control
<br>
  <dl>
    <dd><a href="#drive_system_list">Drive System Commands</a>
    <dd><a href="#rx_list">Receiver Commands</a>
  </dl>

  <dl>

  </dl>
<br>
</dl>

<HR>
<a name="cntl_conf_list"></a>
<a href="control_config.html">
<H2>Control program configuration commands.</H2>
</a>

<DL>
<DT> <code><a href=commands/add_signals.html>add_signals</a> {signal_names}</code>
<DD> Define the list of signal names.

<DT> <code><a href=commands/archive.html>archive</a> [combine=number, dir=/whatever, filter=true|false]</code>
<DD> Configure the data archiver.

<DT> <code><a href=commands/catalog.html>catalog</a> filename</code>
<DD> Load sources from a source catalog file.

<DT> <code><a href=commands/close.html>close</a> archive|log|grabber</code>
<DD> Close the current archive or log file.

<DT> <code><a href=commands/flush.html>flush</a> archive|log</code>
<DD> Flush buffered data to the current archive or log file.

<DT> <code><a href=commands/horizon.html>horizon</a> elevation</code>
<DD> Specify the horizon that is to be assumed by the <a href=commands/show.html>show</a> command.

<DT> <code><a href=commands/loadTransaction.html>loadTransaction</a> filename</code>
<DD> Load transaction definitions from a file.

<DT> <code><a href=commands/logdir.html>logdir</a> directory</code>
<DD> Tell the control program where to put subsequent log files.

<DT> <code><a href=commands/logTransaction.html>logTransaction</a> device, serial number, location, date, who, [comment=?]</code>
<DD> Log a transaction

<DT> <code><a href=commands/open.html>open</a> archive|log|grabber, [dir=?]</code>
<DD> Open a new archive or log file.

<a name=site></a>
<DT> <code><a href=commands/site.html>site</a> longitude, latitude, altitude</code>
<DD> Set the location of the SPT.

<DT> <code><a href=commands/ut1utc.html>ut1utc</a> filename</code>
<DD> Load an ephemeris of UT1-UTC.

<!--<DT> <code><a href=commands/update_year.html>update_year</a></code>
<DD> Send the current year number to the control system.-->

</DL>

</DL>

<HR>
<a name="param_query_list"></a>
<font color=blue><H2>Parameter query functions.</H2></font>
<DL>
<DT> <code>Boolean <a href=commands/archive_filtering.html>archive_filtering</a>()</code>
<DD> Return true if archive filtering is currently enabled.

<DT> <code>Count <a href=commands/archiving_interval.html>archiving_interval</a>()</code>
<DD> Return the current archiving interval.

</DL>

<HR>
<a name="_list"></a>
<font color=blue><H2>General Engineering Commands</H2></font>
<DL>

<!--<DT> <code><a href=commands/reboot.html>reboot</a> cpu|sptAntennaControl|sptControl</code>
<DD> Restart the control system.-->

<!--<DT> <code><a href=commands/load_reboot_script.html>load_reboot_script</a> filename</code>
<DD> Load a schedule script to be run whenever the antenna control cpu reboots.-->

<!--<DT> <code><a href=commands/shutdown.html>shutdown</a> cpu|sptAntennaControl|sptControl</code>
<DD> Halt the control system.-->

</DL>
<HR>
<a name="drive_system_list"></a>
<font color=blue><H2>Drive System Commands.</H2></font>
<DL>

<DT> <code><a href=commands/encoder_zero_points.html>encoder_zero_points</a> azZero, elZero</code>
<DD> Specify the encoder angles of zero topocentric azimuth and elevation.

<DT> <code><a href=commands/halt.html>halt</a> [ant=?]</code>
<DD> Stop the telescope drives and put on the brakes.

<DT> <code><a href=commands/offset.html>offset</a>/add [az=?, el=?, ant=?]</code>
<DD> Change the tracking offsets of one or more telescope axes.

<DT> <code><a href=commands/radec_offset.html>radec_offset</a>/add [x=?, y=?, ant=?]</code>
<DD> Change the equatorial tracking offsets.

<DT> <code><a href=commands/sky_offset.html>sky_offset</a>/add [x=?, y=?, ant=?]</code>
<DD> Change the sky-based tracking offsets.

<DT> <code><a href=commands/slew.html>slew</a> [az=?, el=?, ant=?]</code>
<DD> Slew one or more axes of the telescope.

<DT> <code><a href=commands/slew_rate.html>slew_rate</a> [az=?, el=?, ant=?]</code>
<DD> Set the slew rate of one or more telescope axes.

<DT> <code><a href=commands/service.html>service</a> [ant=?]</code>
<DD> Send the telescope to the service position.

<DT> <code><a href=commands/stow.html>stow</a> [ant=?]</code>
<DD> Send the telescope to the stow position.

<DT> <code><a href=commands/track.html>track</a> source [type=?, ant=?]</code>
<DD> Start tracking a given source <font color=red></font>.

<DT> <code><a href=commands/tv_offset.html>tv_offset</a> right, up [ant=?]</code>
<DD> Adjust the tracking offsets to move the image on the TV monitor.
</DL>

<HR>
<a name="sch_cntl_list"></a>
<font color=blue><H2>Schedule Control Commands.</H2></font>
<DL>

<DT> <code><a href=commands/auto_queue.html>auto_queue</a> [state=?, dir=?, dt=?]</code>
<DD> Control the facility which automatically queues schedule files.

<DT> <code><a href=commands/advance_schedule.html>advance_schedule</a> index number</code>
<DD> Move a schedule one or more entries towards the front of the schedule queue.

<DT> <code><a href=commands/abort_schedule.html>abort_schedule</a></code>
<DD> Abort the schedule that is currently running.

<DT> <code><a href=commands/catch.html>catch condition {statements} {remedial_commands}</a></code>
<DD> Abort the specified block of commands if the given condition becomes true.

<DT> <code><a href=commands/check_schedule.html>check_schedule</a> filename(arguments)</code>
<DD> Check wether the specified schedule would be accepted by the
     <a href=commands/schedule.html>schedule</a> command.

<DT> <code><a href=commands/remove_schedule.html>remove_schedule</a> index</code>
<DD> Remove a given schedule from the schedule queue.

<DT> <code><a href=commands/resume_schedule.html>resume_schedule</a></code>
<DD> Resume execution of a paused scheduling script.

<DT> <code><a href=commands/retard_schedule.html>retard_schedule</a> index number</code>
<DD> Move a schedule one or more entries towards the back of the schedule queue.

<DT> <code><a href=commands/schedule.html>schedule</a> filename(arguments)</code>
<DD> Add a schedule to the list of pending schedules.
     
<DT> <code><a href=commands/signal.html>signal</a>/send|init|clear name</code>
<DD> Send a signal to a running schedule.

<DT> <code>Signal <a href=commands/signaled.html>signaled</a>(signal)</code>
<DD> Check whether a given signal has been sent by the user.
 
<DT> <code><a href=commands/suspend_schedule.html>suspend_schedule</a></code>
<DD> Temporarily suspend execution of the schedule that is currently running.

</DL>

<HR>
<a name="sch_inq_list"></a>
<font color=blue><H2>Scheduling inquiry functions.</H2></font>
<DL>
<DT> <code>Boolean <a href=commands/after.html>after</a>(time, utc|lst)</code>
<DD> Return true if the current time is after a given time-of-day.

<DT> <code>Boolean <a href=commands/acquired.html>acquired</a>(operations, [ant=?])</code>
<DD> Return true if a specified set of operations has completed.

<DT> <code>Boolean <a href=commands/between.html>between</a>(start, end, utc|lst)</code>
<DD> Return true if the current time is within a given window of time.
<DT> <code>Interval <a href=commands/elapsed.html>elapsed</a>()</code>
<DD> Return the time spent within the enclosing loop or
     <code><a href=commands/until.html>until</a></code> statement.

<DT> <code>Count <a href=commands/iteration.html>iteration</a>()</code>
<DD> Return the number of <em>completed</em> iterations of an enclosing loop.

</DL>

<HR>
<a name="gen_script_list"></a>
<font color=blue><H2>General Scripting Commands.</H2></font>
<DL>

<DT> <code><a href=commands/break.html>break</a></code>
<DD> Prematurely exit the innermost enclosing
     <code><a href=commands/foreach.html>foreach</a></code>
     or <code><a href=commands/while.html>while</a></code> loop.

<DT> <code><a href=commands/cleanup.html>cleanup</a> {statements}</code>
<DD> Register a list of statements to be run when the script terminates.

<DT> <code><a href=commands/exit.html>exit</a></code>
<DD> Terminate execution of the containing script.

<DT> <code><a href=commands/datatype.html>&lt;datatype&gt;</a><code> name = value</code>
<DD> Create a new scalar variable and give it a value.

<DT> <code><a href=commands/command.html>command</a> name(type name, ...) {commands}</code>
<DD> Create a new command.

<DT> <code><a href=commands/do.html>do</a> datatype variable=start,stop,increment {commands}</code>
<DD> Repeatedly run a set of commands while stepping the value of a local variable.

<DT> <code><a href=commands/foreach.html>foreach</a>(type name) list {commands}</code>
<DD> Loop through a set of commands once for each member of a list.

<DT> <code><a href=commands/function.html>function</a> type name(type name, ...) {expression}</code>
<DD> Create a new function.

<DT> <code><a href=commands/if.html>if</a>(clause) {commands} else if(clause) {commands} else {commands}</code>
<DD> Conditionally execute one of a number of blocks of commands.

<DT> <code><a href=commands/ifhost.html>ifhost</a>(clause) hostname1 {commands} hostname2 {commands} {commands}</code>
<DD> Conditionally execute commands that are specific to given sptControl hosts.

<DT> <code><a href=commands/import.html>import</a> filename</code>
<DD> Import the contents of another script.

<DT> <code><a href=commands/listof.html>listof</a> type name = {value, ...}</code>
<DD> Declare a new variable and initialize it with a list of a given type.

<DT> <code><a href=commands/log.html>log</a> &quot;string&quot; | $datatype(expr) | $function(args) | $variable</code>
<DD> Record a message in the log file and send it to control clients.

<DT> <code><a href=commands/next.html>next</a></code>
<DD> Prematurely start the next iteration of the innermost loop.

<DT> <code><a href=commands/print.html>print</a> &quot;string&quot; | $datatype(expr) | $function(args) | $variable</code>
<DD> Print one or more arguments according to their types.

<DT> <code><a href=commands/return.html>return</a></code>
<DD> Finish executing the enclosing command without executing any of
     its remaining statements.

<DT> <code><a href=commands/group.html>group</a> name {type name, ...}</code>
<DD> Create a new aggregate datatype.

<DT> <code><a href=commands/until.html>until</a> clause</code>
<DD> Halt script execution until the given boolean clause becomes true.

<DT> <code><a href=commands/while.html>while</a>(clause) {commands}</code>
<DD> Repeatedly run a set of commands while the given boolean clause is true.

</DL>

<HR>
<a name="misc_cmd_list"></a>
<font color=blue><H2>Miscellaneous Commands.</H2></font>
<DL>

<DT> <code><a href=commands/mark.html>mark</a> one|add|remove, features</code>
<DD> Change the set of feature markers to be recorded in the archive.

</DL>

<HR>
<a name="misc_inq_cmd_list"></a>
<font color=blue><H2>Miscellaneous Inquiry Commands.</H2></font>
<DL>

<DT> <code><a href=commands/show.html>show</a> source, [utc=?, horizon=?, ant=?]</code>
<DD> Display contemporary information about a source.

</DL>

<HR>
<a name="misc_inq_list"></a>
<font color=blue><H2>Miscellaneous Inquiry Functions.</H2></font>
<DL>

<DT> <code>Azimuth <a href=commands/azimuth.html>azimuth</a>(source)</code>
<DD> Return the current azimuth of a given source.

<DT> <code>Date <a href=commands/date.html>date</a>()</code>
<DD> Return the current date and time (UTC).

<DT> <code>Elevation <a href=commands/elevation.html>elevation</a>(source)</code>
<DD> Return the current elevation of a given source.

<DT> <code>Time <a href=commands/time.html>time</a>(utc|lst)</code>
<DD> Return the current time of day on a given time-scale.

<DT> <code>Date <a href=commands/today.html>today</a>()</code>
<DD> Return today's date (0h UTC).

<DT> <code>Date <a href=commands/tomorrow.html>tomorrow</a>()</code>
<DD> Return tomorrow's date (0h UTC).

</DL>

<HR>
<a name="env_var"></a>
<font color=blue><H2>Environment variables.</H2></font>
<DL>
<DT> <code><a href=commands/hostname.html>hostname</a></code>
<DD> The name of the computer that is running sptControl.
</DL>

<HR>
<a name="array_configuration_list"></a>
<font color=blue><H2>Array Configuration Commands.</H2></font>
<DL>

<HR>
<a name="pointing_model_list"></a>
<font color=blue><H2>Pointing Model Configuration Commands.</H2></font>
<DL>

<DT> <code><a href=commands/collimate.html>collimate</a> radio|optical, az, el</code>
<DD> Specify the collimation offset (in degrees) of the specified model from the fiducial pointing model.

<DT> <code><a href=commands/flexure.html>flexure</a> flexure</code>
<DD> Enter the measured gravitational flexure of the telescope.

<DT> <code><a href=commands/limits.html>limits</a> azMin, azMax,
elMin, elMax</code>
<DD> Specify the azimuth and elevation encoder limits.

<DT> <code><a href=commands/model.html>model</a> radio|optical [ant=?]</code>
<DD> Select between the radio and optical pointing models.

<DT> <code><a href=commands/tilts.html>tilts</a> ha, lat, el</code>
<DD> Specify the tilts in the telescope axes.
</DL>

<HR>
<a name=sza_dt></a>
<a href=dataTypes/dt.html><H2>SPT Datatypes.</H2></a>
<DL>

<DT> <code><a href=dataTypes/AcquireTargets.html>AcquireTargets</a></code>
<DD> A selection of ongoing transactions.

<DT> <code><a href=dataTypes/Altitude.html>Altitude</a></code>
<DD> A geodetic altitude (m).

<DT> <code><a href=dataTypes/ArcFile.html>ArcFile</a></code>
<DD> An archive file type (archive or log).

<DT> <code><a href=dataTypes/Azimuth.html>Azimuth</a></code>
<DD> A telescope azimuth (North=0, East=90, South=180, West=270).

<DT> <code><a href=dataTypes/BitMask.html>BitMask</a></code>
<DD> A 32-bit number specified as an unsigned number or as a set of bits.

<DT> <code><a href=dataTypes/BitMaskOper.html>BitMaskOper</a></code>
<DD> The operator to use when applying a BitMask template to a BitMask.

<DT> <code><a href=dataTypes/Board.html>Board</a></code>
<DD> A SPT register-board name.

<DT> <code><a href=dataTypes/Boolean.html>Boolean</a></code>
<DD> A truth or false value.

<DT> <code><a href=dataTypes/Count.html>Count</a></code>
<DD> A positive integral count.

<DT> <code><a href=dataTypes/Date.html>Date</a></code>
<DD> A Gregorian date and time (UTC).

<DT> <code><a href=dataTypes/Double.html>Double</a></code>
<DD> A generic signed floating-point datatype.

<DT> <code><a href=dataTypes/DsCommand.html>DsCommand</a></code>
<DD> A command to send to the thermometry task.

<DT> <code><a href=dataTypes/Elevation.html>Elevation</a></code>
<DD> A telescope elevation (0..90).

<DT> <code><a href=dataTypes/Features.html>Features</a></code>
<DD> A set of markers that indicate features of interest in an archive frame.

<DT> <code><a href=dataTypes/Flexure.html>Flexure</a></code>
<DD> Gravitational flexure (degrees per cosine of elevation).

<DT> <code><a href=dataTypes/Heaters.html>Heaters</a></code>
<DD> A set of antenna-based heaters.

<DT> <code><a href=dataTypes/HeaterVoltage.html>HeaterVoltage</a></code>
<DD> The target voltage of a heater feedback sensor.

<DT> <code><a href=dataTypes/InputFile.html>InputFile</a></code>
<DD> The pathname of a readable file.

<DT> <code><a href=dataTypes/Integer.html>Integer</a></code>
<DD> A generic signed integer.

<DT> <code><a href=dataTypes/Interval.html>Interval</a></code>
<DD> A time interval.

<DT> <code><a href=dataTypes/Ip.html>Ip</a></code>
<DD> An IP address.

<DT> <code><a href=dataTypes/Keyword.html>Keyword</a></code>
<DD> An unquoted case-insensitive keyword string.

<DT> <code><a href=dataTypes/Latitude.html>Latitude</a></code>
<DD> A geodetic latitude (-90..90).

<DT> <code><a href=dataTypes/Longitude.html>Longitude</a></code>
<DD> A geodetic longitude (-180..180).

<DT> <code><a href=dataTypes/Model.html>Model</a></code>
<DD> A pointing model (radio or optical).

<DT> <code><a href=dataTypes/OffsetMode.html>OffsetMode</a></code>
<DD> Is used to specify how new pointing offsets modify existing ones.

<DT> <code><a href=dataTypes/OptCamCount.html>OptCamCount</a></code>
<DD> An integral number of steps to step the stepper motor, or camera control keywords.

<DT> <code><a href=dataTypes/OptCamTarget.html>OptCamTarget</a></code>
<DD> The target of an optical_camera command.

<DT> <code><a href=dataTypes/PagerState.html>PagerState</a></code>
<DD> The requested state of the pager.

<DT> <code><a href=dataTypes/PagerDev.html>PagerDev</a></code>
<DD> The target pager device.

<DT> <code><a href=dataTypes/PointingOffset.html>PointingOffset</a></code>
<DD> A temporary ra,dec or az,el pointing offset (-180..180).

<DT> <code><a href=dataTypes/QueueEntry.html>QueueEntry</a></code>
<DD> The index of a script within the schedule queue.

<DT> <code><a href=dataTypes/Register.html>Register</a></code>
<DD> An SPT register name.

<DT> <code><a href=dataTypes/RegValue.html>RegValue</a></code>
<DD> A 32-bit unsigned integer register value.

<DT> <code><a href=dataTypes/szascript/RomId.html>RomId</a></code>
<DD> The ROM id of a 1-wire device.

<DT> <code><a href=dataTypes/Script.html>Script</a></code>
<DD> The pathname and arguments of a scheduling script.

<DT> <code><a href=dataTypes/Sexagesimal.html>Sexagesimal</a></code>
<DD> A generic signed floating-point datatype expressed in sexagesimal.

<DT> <code><a href=dataTypes/Signal.html>Signal</a></code>
<DD> A signal name.

<DT> <code><a href=dataTypes/SlewRate.html>SlewRate</a></code>
<DD> A slew rate expressed as a percentage of the maximum.

<DT> <code><a href=dataTypes/Source.html>Source</a></code>
<DD> A source from the source catalog.

<DT> <code><a href=dataTypes/String.html>String</a></code>
<DD> A literal string.

<DT> <code><a href=dataTypes/SwitchState.html>SwitchState</a></code>
<DD> The on or off state of a switch.

<!--<DT> <code><a href=dataTypes/SysType.html>SysType</a></code>
<DD> The target subsystem of a reboot or shutdown.-->

<DT> <code><a href=dataTypes/Tilt.html>Tilt</a></code>
<DD> An telescope axis tilt angle.

<DT> <code><a href=dataTypes/Time.html>Time</a></code>
<DD> A time of day or time interval.

<DT> <code><a href=dataTypes/TimeScale.html>TimeScale</a></code>
<DD> A timescale specifier (UTC or LST).

<DT> <code><a href=dataTypes/Wdir.html>Wdir</a></code>
<DD> The pathname of a writable directory.

</DL>

<HR>
Erik Leitch (Tue Mar 30 21:16:16 PST 2004)
Ken Aird (Wed Jan 18 10:52:14 CST 2006)
</BODY>
