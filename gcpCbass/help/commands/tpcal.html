<HEAD><TITLE>The "tpcal" command.</TITLE></HEAD>
<BODY bgcolor="#add8e6">

<HR>
<font color=blue><a name="tpcal"> <code><b>tpcal</b> receivers, bands, factor</code> </a></font>
<P>
Specify the scale factor used to convert ADC units to total power units.
<P>
<DL>
<DT> Arguments:
<DD> <DL>
     <DT><code><b><a href=../dataTypes/Receivers.html>Receivers</a> receivers</b></code>
     <DD> The set of receivers to target.
     <DT><code><b><a href=../dataTypes/Bands.html>Bands</a> bands</b></code>
     <DD> The set of frequency bands to target.
     <DT><code><b><a href=../dataTypes/Double.html>Double</a> factor</b></code>
     <DD> Factor to convert ADC units to power units used by the tp command.
     </DL>
<P>
<DT> Example 1:
<DD> The following example sets the scale factor to convert raw ADC
     units into the units of power which will be supplied to the
     <a href=tp.html>tp</a></code> command. ie. 2 mW per -1 ADC count.
<pre>
 tpcal all, all, -2
</pre>

<P>
<DT> Context:
<DD> BICEP has 13 receivers (rx0..rx12) whose 10GHz bandpasses are
     split into 10 bands (band0..band9) by a channelizer.
     The resulting 130 signal paths are refered to as channels.
     Every channel contains a programmable attenuator for setting the input
     power to the corresponding correlator input.
     The <a href=tp.html>tp</a></code> command is used to autoset these
     attenuators to a achieve a given power level.
     We wish to specify the target power to this command in physical
     units - the tpcal command allows this by specifying 
     a scale factor to apply to the raw ADC readings.
     The ADC value runs 0 to 255 corresponding approx to -5 to 5 V.
     The zero offset of approx 128 is measured using the
     <a href=tp.html>tpzero</a></code> command, and is automatically
     subtracted online.
     The ADC reading decreases with increasing power.
     Therefore the default scale factor on all channels is -1.
<P>
     NB: Only negative values of factor make sense, and in fact
     the tp search algorithm will fail if a positive factor is
     specified.
     There should be type checking to prevent positive values being
     entered but right now there isn't...
</DL>

<HR>
Clem Pryke (10-Feb-2000)
</BODY>
