<HEAD><TITLE>The signal command.</TITLE></HEAD>
<BODY bgcolor="#add8e6">

<HR>
<font color=blue><code><b>signal</b>/send|init|clear name</code></font>
<P>
Send a signal to a running schedule.
<P>
<DL>
<DT> Optional qualifier arguments:
<DD> <DL>
     <DT><code>/send</code> (the default)
     <DD> Send the specified signal.
     <DT><code>/init</code>
     <DD> Discard any previously sent copies of the signal.
     <DT><code>/clear</code>
     <DD> Discard the last sent copy of the signal.
     </DL>
<DT> Mandatory arguments:
<DD> <DL>
     <DT><code><b><a href=../dataTypes/Signal.html>Signal</a> name</b></code>
     <DD> The name of the signal to be sent, initialized or discarded.
     </DL>
<P>
<DT> Example:
<DD> The following example will cause the next call to the
     <code><a href=signaled.html>signaled</a>(abort)</code>
     function to return the boolean value, <code>true</code>.
<pre>
 signal abort
</pre>

<P>
<DT> Context:
<DD> The <code>signal</code> command provides a way for users of
     viewer to send a variety of control messages to running
     schedules.  The list of available messages is defined in the
     the control program startup script by calling the <code><a
     href=add_signals.html>add_signals</a></code> command.  Scheduling
     scripts either ignore these signals, or periodically check for
     them by calling the <code><a href=signaled.html>signaled</a>(name)</code>
     function.
<P>
     In more detail, there is a counter associated with each
     signal-name which starts with the value zero, then gets
     incremented by one whenever the corresponding signal is sent by
     the user. The <code>$signaled(name)</code> function returns true
     when this counter is greater than zero. Writers of scheduling
     scripts should start by zeroing the counters of all the signals
     that they are interested in. This is done as follows:

<pre>
 signal/init quit
 signal/init skip
</pre>

     They should then check for the arrival of these signals at
     appropriate points in the program. For example the following
     extract of a scheduling script observes jupiter until the user
     sends a quit signal, then it stows the telescope.

<pre>
 track jupiter
 until $signaled(quit)
 track stow
</pre>

    If the script writer is expecting to separately respond to the
    user sending the same signal multiple times, then the writer
    should use the <code>signal/clear</code> command to decrement the
    counter of the signal after handling each receipt. Otherwise every
    call to <code>$signaled(quit)</code> will continue to report on
    the receipt of the first signal that the user sent.

<pre>
  foreach(Source s) {jupiter, venus, saturn} {
    track $s
    until $elapsed >= 30m | $signaled(skip)
    if($signaled(skip)) {
      print "Skipping source: ", $s
      signal/clear skip
    }
  }
</pre>

    This example successively observes Jupiter, Venus and Saturn for
    30 minutes each unless interrupted by the user typing:

<pre>
 signal skip
</pre>

    Each time that the user types this, the script stops observing the
    current source and goes on to observe the next.
</DL>

<HR>
Erik Leitch (Tue Mar 30 21:16:48 PST 2004)
</BODY>
