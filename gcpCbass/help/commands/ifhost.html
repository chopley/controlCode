<HEAD><TITLE>The ifhost command.</TITLE></HEAD>
<BODY bgcolor="#add8e6">
<font color=blue><code><b>ifhost</b> hostname1 {commands} hostname2 {commands} {commands}</font>
<P>
Conditionally execute commands that are specific to given control hosts.
<P>
<DL>
<DT> Arguments:
<DD> <DL>
     <DT><code>hostname</code>
     <DD> The name of the computer which is running the control system
     <DT><code>commands</code>
     <DD> A block of commands to be executed on the specified host computer.
     </DL>
<P>
<DT> Example 1:
<DD> The following example shows how one could use the <code>ifhost</code>
     command in the control system initialization script to specify where
     archive and log files should be created on a host-by-host basis.

<pre>
 ifhost snug {
   open archive, dir=/scr/bicepdaq/arc
   open log, dir=/scr/bicepdaq/log
 } lyra {
   open archive, dir=/scr2/bicepdaq/arc
   open log, dir=/scr2/bicepdaq/log
 } {
   print "Warning: I don't know where to put archive and log files on ",
     $hostname, ".\n"
 }
</pre>

<DT> Example 2:
<DD> The following example shows how one could use the ifhost command
     to control a GPIB device that only exists on the antenna control CPU
     that is connected to the control program that is running on a
     computer called "vega".

<pre>
  ifhost vega {
    gpib_send 15, "TR"
  }
</pre>

<DT> Context:
<DD> The <code>ifhost</code> command is a preprocessing command. It
     tells the compiler in the control system to skip statements that are
     marked as being specific to another computer. This allows one to
     include statements that cite file-names that don't exist on every
     computer on which the control system can be run. These file-names would
     otherwise cause the control system to reject the containing script.
<P>
     The <code>ifhost</code> command works a bit like an
     if-elseif-else type of statement. After the list of statements
     that follows the first hostname, one can specify another hostname
     and list of statements. This in turn can be followed by another
     hostname and statement-list.  Once a matching hostname is found,
     the corresponding list of statements is compiled, and the rest of
     the hostname/statement-list pairs are skipped. If none of the
     hostnames match and the list of statements that follows the last
     hostname is followed immediately by another list of statements
     without an intervening hostname, then that final list of
     statements is executed.

     For example:

<P>
<pre>
  ifhost goblin {
    print "goblin"
  }
</pre>
<P>

     will not print anything unless the control system is running on goblin.
     Similarly,

<P>
<pre>
  ifhost goblin {
    print "goblin"
  } elf {
    print "elf"
  }
</pre>
<P>

    will print "goblin" if the control system is running on goblin, "elf" if
    it is running on elf, but nothing at all otherwise.

    Finally:

<P>
<pre>
  ifhost goblin {
    print "goblin"
  } elf {
    print "elf"
  } {
    print "Unexpected host: ", $hostname
  }
</pre>
<P>

  will print the same as the previous example, except in the case
  where the control system is running on neither goblin nor elf. In this case
  it will print a warning message about the unknown host.

</DL>

<HR>
Erik Leitch (Tue Mar 30 21:16:14 PST 2004)
</BODY>
