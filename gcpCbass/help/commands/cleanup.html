<HEAD><TITLE>The cleanup command.</TITLE></HEAD>
<BODY bgcolor="#add8e6">

<HR>
<font color=blue><a name=cleanup> <code><b>cleanup {statements}</b></code> </a></font>
<P>
Register a list of statements to be called when the script exits or is aborted.
<P>
<DL>
<DT> Arguments:
<DD> <DL>
     <DT><code>{<u>statements</u>}</code>
     <DD> A list of statements to be executed when the script ends.
     </DL>

<P>
<DT> Example:
<DD> The following statement registers a block of statements to be
     executed when the calling script exits for any reason. Note the
     use of the &quot;<code>reason</code>&quot; variable, which
     contains the reason for the exit. In this case the value of this
     variable is supplied via the string argument of the <a
     href=exit.html><code>exit</code></a> statement. The
     &quot;reason&quot; variable is described in more detail below.

<pre>
  cleanup {
    print &quot;Reason for exit: &quot;, $reason
    archive combine=10     # Save disk space by archiving slowly.
    signal/init quit       # Discard pending signals.
    mark remove, all       # Remove all feature markers.
    track stow             # Stow the telescope.
  }
  ...
  exit &quot;All our sources have set.&quot;
</pre>


<DT> Context:
<DD> Scripts can be terminated deliberately by calling the <a
     href=exit.html><code>exit</code></a> command, by reaching the end
     of the script, or by being aborted externally with the <a
     href=abort_schedule.html><code>abort_schedule</code></a> command.
     Particularly in the case of an external abort, it is usually
     desirable to tie up loose ends left by an incomplete script. The
     <code>cleanup</code> command allows one to register statements to
     perform this cleanup when the script terminates.
<P>
     The block of cleanup statements is given access to a local <a
     href=../dataTypes/String.html>String</a> variable called &quot;reason&quot;.
     This contains the reason for the exit. It either has the value
     presented to the <a href=exit.html><code>exit</code></a> command,
     or, if this argument is omitted, one of the following standard
     values:
<P>
<UL>
<LI> <code>&quot;abort&quot;</code> - The script was aborted via the <a
     href=abort_schedule.html>abort_schedule</a> command.
<LI> <code>&quot;end&quot;</code> - The script finished normally.
<LI> <code>&quot;exit&quot;</code> - An <a href=exit.html><code>exit</code></a>
                           command was executed without a
                           <code>reason</code> argument being given.
</UL>

</DL>

<HR>
Erik Leitch (Tue Mar 30 21:15:52 PST 2004)
</BODY>
